{% extends 'base.html' %}

{% block head %}
    {#  replace with production vue  #}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script type="text/x-template" id="modal-template">
        <transition name="modal">
            <div class="modal-mask">
                <div class="modal-wrapper">
                    <div class="modal-container">

                        <div class="modal-header">
                            <slot name="header">
                                default header
                            </slot>
                        </div>

                        <div class="modal-body">
                            <slot name="body">
                                default body
                            </slot>
                        </div>

                        <div class="modal-footer">
                            <slot name="footer">
                                <button class="modal-default-button" @click="$emit('close')">
                                    Close
                                </button>
                            </slot>
                        </div>
                    </div>
                </div>
            </div>
        </transition>
    </script>
{% endblock %}

{% block body %}
    <div class="grid-container" id="app">
        <div class="header">
            <div id="title">Мой фотоальбом</div>
            <form action="" method="post" enctype="multipart/form-data">
                {{ form.hidden_tag() }}
                <div>
                    {{ form.image.label }}
                    {{ form.image() }}
                </div>
                <div>
                    {{ form.submit() }}
                </div>
            </form>
        </div>
        <div class="main">
            <div class="images-container" v-for="image in paginatedData">
                <button @click="image.showModal = true">Show image [[ image.name ]]</button>
                <modal v-if="image.showModal" @close="image.showModal = false">
                    <div slot="header">[[ image.name ]]</div>
                    <div slot="body"><img class="image" v-bind:src="image.file_url" v-bind:alt="image.name"></div>
                </modal>
            </div>
        </div>
        <div class="footer">
            <button
                    :disabled="pageNumber === 0"
                    @click="prevPage">
                Previous
            </button>
            <button
                    :disabled="pageNumber >= pageCount -1"
                    @click="nextPage">
                Next
            </button>
        </div>
    </div>
    <script type="text/javascript" src="{{ url_for('static', filename='js/main.js') }}"></script>
{% endblock %}
